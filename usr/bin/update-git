#!/bin/bash

source ctos-functions

clear
cd "$PWD"
lineBreak="<~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~>"
echo "Updating the current repo and"
echo "pushing it to a git repo."
echo $lineBreak
if !( git add . ); then
    echo "Something went wrong while trying to add files."
    not_my_dir
    something_wrong
else
    echo "Changes successfully added."
    echo $lineBreak
    echo "Please type your notes for this"
    echo "commit and press enter when done."
    echo $lineBreak
    read theCommit
    if !( git commit -m "$theCommit" ); then
        echo "I am unable to commit the changes."
        something_wrong
    else
        echo $lineBreak
        echo "Changes commited successfully."
        echo "Please enter your password."
        if !(git push); then
            echo "Unable to push changes to the Git repo."
            something_wrong
        else
            echo $lineBreak
            echo "All done. Git repo successfully updated."
            echo $lineBreak
        fi
    fi
fi
say_goodbye
exit 0
